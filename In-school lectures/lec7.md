# Lec7: 对象的拷贝与转移初始化
## 拷贝构造函数
在创建一个对象时，如果用另一个同类的对象对其进行初始化，将会去调用对象类中的一个特殊构造函数--拷贝构造函数。
拷贝构造函数的参数类型为本类的引用。
拷贝构造函数的参数必须是引用类型，否则会导致无限递归调用。
```cpp
class A
{	......
	public:
		A();  //默认构造函数
		A(const A& a);  //拷贝构造函数
}; 
```
在下面三种情况下，会去调用拷贝构造函数：
1. 创建对象时显式指出用另一个同类对象**对其初始化**。
2. 把对象作为**值参数**传给函数，先创造形式参数的对象，再调用拷贝构造函数来初始化。
3. 把对象作为函数的**返回值**时，先创造返回值的对象，再调用拷贝构造函数来初始化。

如果在类中没有定义拷贝构造函数，编译器会自动生成一个默认的拷贝构造函数，按成员逐一拷贝。
对成员对象，调用其拷贝构造函数，类似递归。

### 自定义拷贝构造函数
一般情况下，编译程序提供的隐式拷贝构造函数的行为足以满足要求，类中不需要自定义拷贝构造函数。
但在一些特殊情况下，必须要自定义拷贝构造函数，否则，将会产生设计者未意识到的严重程序错误。 
```cpp
class String
{	   int len;
	   char *str;
	public:
		String(const char *s) 
		{ len = strlen(s); 
		   str = new char[len+1]; 
		   strcpy(str,s); 
		}
		~String() { delete []str; len=0; str=NULL; }
};
......
String s1("abcd");
String s2(s1);
```
隐式的拷贝构造函数将会使得s1和s2的成员指针str指向**同一块内存区域**！
